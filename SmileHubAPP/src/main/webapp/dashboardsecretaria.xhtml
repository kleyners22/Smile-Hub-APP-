<ui:composition template="/WEB-INF/template/base.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="jakarta.faces.html"
                xmlns:f="jakarta.faces.core"
                xmlns:ui="jakarta.faces.facelets"
                xmlns:p="primefaces">

    <ui:define name="content">
        <style>
            /* Paleta de colores y variables */
            :root {
                --blue-primary: #2563eb;
                --yellow-kpi: #facc15;
                --green-kpi: #22c55e;
                --purple-kpi: #a855f7;
                --bg-main: #f1f5f9;
                --text-dark: #1e293b;
            }

            .dashboard-wrapper {
                background-color: var(--bg-main);
                padding: 1.5rem;
                font-family: 'Inter', sans-serif !important;
            }

            /* Header Section */
            .header-bar {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 2rem;
            }

            /* KPI Cards */
            .kpi-grid {
                display: grid;
                grid-template-columns: repeat(4, 1fr);
                gap: 1.5rem;
                margin-bottom: 2rem;
            }

            .kpi-box {
                padding: 1.5rem;
                border-radius: 12px;
                color: white;
                position: relative;
                min-height: 120px;
                box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
            }

            .kpi-box i {
                position: absolute;
                right: 1.5rem;
                bottom: 1.5rem;
                font-size: 2.5rem;
                opacity: 0.3;
            }

            .kpi-value { font-size: 2.5rem; font-weight: 700; display: block; }
            .kpi-label { font-size: 1rem; font-weight: 500; }

            /* Panel White */
            .panel-card {
                background: white;
                padding: 1.5rem;
                border-radius: 12px;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
                margin-bottom: 1.5rem;
            }

            /* Appointment Cards */
            .cita-card {
                border: 1px solid #e2e8f0;
                border-left: 6px solid;
                border-radius: 10px;
                padding: 1.2rem;
                margin-bottom: 1rem;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .cita-pendiente { border-left-color: var(--yellow-kpi); }
            .cita-atendida { border-left-color: var(--green-kpi); }

            .main-layout {
                display: grid;
                grid-template-columns: 320px 1fr;
                gap: 1.5rem;
            }

            .badge {
                padding: 4px 12px;
                border-radius: 20px;
                font-size: 0.8rem;
                font-weight: 600;
                color: white;
            }

            .badge-pendiente { background-color: var(--yellow-kpi); color: #854d0e; }
            .badge-atendida { background-color: var(--green-kpi); }

            /* Ajuste para el calendario de PrimeFaces */
            .ui-datepicker-inline { width: 100% !important; border: none !important; }
        </style>

        <h:form id="dashForm">
            <div class="dashboard-wrapper">

                <div class="header-bar">
                    <div>
                        <h1 style="color: var(--blue-primary); margin: 0; font-weight: 800;">SMILEHUB</h1>
                        <p style="color: #64748b; margin: 0;">Sistema de Agendamiento de Citas Odontológicas - Panel de Secretaría</p>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <p:commandButton value="Nueva Cita" icon="pi pi-plus" styleClass="ui-button-primary" />
                        <p:commandButton value="Nuevo Doctor" icon="pi pi-sync" styleClass="ui-button-outlined" />
                        <p:commandButton value="Ver Registros" icon="pi pi-file" styleClass="ui-button-outlined" />
                        <p:commandButton value="Cerrar Sesión" icon="pi pi-sign-out" styleClass="ui-button-danger ui-button-flat"
                                         action="#{authenticationController.logout}"/>
                    </div>
                </div>

                <div class="kpi-grid">
                    <div class="kpi-box" style="background: var(--blue-primary);">
                        <span class="kpi-label">Citas Hoy</span>
                        <span class="kpi-value">2</span>
                        <i class="pi pi-calendar"></i>
                    </div>
                    <div class="kpi-box" style="background: var(--yellow-kpi); color: #854d0e;">
                        <span class="kpi-label">Pendientes</span>
                        <span class="kpi-value">1</span>
                        <i class="pi pi-calendar"></i>
                    </div>
                    <div class="kpi-box" style="background: var(--green-kpi);">
                        <span class="kpi-label">Atendidas Hoy</span>
                        <span class="kpi-value">1</span>
                        <i class="pi pi-calendar"></i>
                    </div>
                    <div class="kpi-box" style="background: var(--purple-kpi);">
                        <span class="kpi-label">Total Pacientes</span>
                        <span class="kpi-value">3</span>
                        <i class="pi pi-users"></i>
                    </div>
                </div>

                <div class="panel-card">
                    <h4 style="margin-top: 0;"><i class="pi pi-filter" /> Filtros y Búsqueda de Citas</h4>
                    <div class="ui-g">
                        <div class="ui-g-12 ui-md-6">
                            <p:outputLabel value="Buscar Paciente" for="search" style="display:block; margin-bottom:5px;"/>
                            <p:inputText id="search" placeholder="Buscar por nombre, apellido o número de identificación..." style="width: 100%"/>
                        </div>
                        <div class="ui-g-12 ui-md-3">
                            <p:outputLabel value="Filtrar por Estado" style="display:block; margin-bottom:5px;"/>
                            <p:selectOneMenu style="width: 100%">
                                <f:selectItem itemLabel="Todos los estados" itemValue="" />
                            </p:selectOneMenu>
                        </div>
                        <div class="ui-g-12 ui-md-3">
                            <p:outputLabel value="Filtrar por Doctor" style="display:block; margin-bottom:5px;"/>
                            <p:selectOneMenu style="width: 100%">
                                <f:selectItem itemLabel="Todos los doctores" itemValue="" />
                            </p:selectOneMenu>
                        </div>
                    </div>
                </div>

                <div class="main-layout">
                    <div class="panel-card" style="padding: 0; overflow: hidden;">
                        <div style="background: var(--blue-primary); color: white; padding: 15px;">
                            <i class="pi pi-calendar-plus" style="margin-right: 10px;"/> Vista Mensual
                        </div>
                        <p:calendar mode="inline" locale="es" />
                    </div>

                    <div>
                        <div style="background: var(--blue-primary); color: white; padding: 12px 20px; border-radius: 8px 8px 0 0;">
                            Citas para 6 de febrero de 2026
                        </div>
                        <div class="panel-card" style="border-top-left-radius: 0; border-top-right-radius: 0;">

                            <div class="cita-card cita-pendiente">
                                <div style="display: flex; gap: 20px; align-items: center;">
                                    <div style="text-align: center;">
                                        <i class="pi pi-clock" style="color: var(--blue-primary); font-size: 1.5rem;"/><br/>
                                        <b style="font-size: 1.2rem;">09:00</b>
                                    </div>
                                    <div>
                                        <span class="badge badge-pendiente">Pendiente</span><br/>
                                        <h:panelGrid columns="2" style="margin-top: 5px;">
                                            <i class="pi pi-user" style="color: #64748b"/>
                                            <h:outputText value="Paciente: Juan Carlos Martínez López" style="font-weight: 600;"/>

                                            <i class="pi pi-sync" style="color: #64748b"/>
                                            <h:outputText value="Doctor(a): María Elena Pérez Ramírez" style="color: #64748b"/>
                                        </h:panelGrid>
                                    </div>
                                </div>
                                <div style="text-align: right;">
                                    <p:commandButton icon="pi pi-file-pdf" value="Ver Comprobante" styleClass="ui-button-outlined ui-button-sm" style="margin-bottom: 10px; display: block;"/><br/>
                                    <p:selectOneMenu value="Pendiente" style="width: 150px;">
                                        <f:selectItem itemLabel="Pendiente" itemValue="Pendiente" />
                                        <f:selectItem itemLabel="Atendida" itemValue="Atendida" />
                                    </p:selectOneMenu>
                                </div>
                            </div>

                            <div class="cita-card cita-atendida">
                                <div style="display: flex; gap: 20px; align-items: center;">
                                    <div style="text-align: center;">
                                        <i class="pi pi-clock" style="color: var(--blue-primary); font-size: 1.5rem;"/><br/>
                                        <b style="font-size: 1.2rem;">10:30</b>
                                    </div>
                                    <div>
                                        <span class="badge badge-atendida">Atendida</span><br/>
                                        <h:panelGrid columns="2" style="margin-top: 5px;">
                                            <i class="pi pi-user" style="color: #64748b"/>
                                            <h:outputText value="Paciente: Ana Lucía González Vera" style="font-weight: 600;"/>

                                            <i class="pi pi-sync" style="color: #64748b"/>
                                            <h:outputText value="Doctor(a): Carlos Alberto Rodríguez Sánchez" style="color: #64748b"/>
                                        </h:panelGrid>
                                    </div>
                                </div>
                                <div style="text-align: right;">
                                    <p:commandButton icon="pi pi-file-pdf" value="Ver Comprobante" styleClass="ui-button-outlined ui-button-sm" style="margin-bottom: 10px; display: block;"/><br/>
                                    <p:selectOneMenu value="Atendida" style="width: 150px;">
                                        <f:selectItem itemLabel="Atendida" itemValue="Atendida" />
                                    </p:selectOneMenu>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </h:form>
    </ui:define>
</ui:composition>