<ui:composition template="/WEB-INF/template/base.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="jakarta.faces.html"
                xmlns:f="jakarta.faces.core"
                xmlns:ui="jakarta.faces.facelets"
                xmlns:p="primefaces">

    <f:metadata>
        <f:viewAction action="#{userSession.checkLogin()}" />
    </f:metadata>

    <ui:define name="title-view">
        SMILEHUB - Panel de Secretaría
    </ui:define>

    <ui:define name="content">
        <style>
            /* Paleta de colores de tu imagen */
            :root {
                --blue-primary: #2563eb;
                --yellow-stat: #facc15;
                --green-stat: #22c55e;
                --purple-stat: #a855f7;
                --bg-light: #f8fafc;
            }

            .dashboard-container {
                background-color: var(--bg-light);
                padding: 25px;
                font-family: 'Inter', sans-serif;
            }

            /* Header Principal */
            .dash-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 30px;
            }

            .brand-section h1 {
                margin: 0;
                color: var(--blue-primary);
                font-weight: 800;
                font-size: 1.8rem;
                letter-spacing: -1px;
            }

            /* Tarjetas KPI Superiores */
            .kpi-grid {
                display: grid;
                grid-template-columns: repeat(4, 1fr);
                gap: 20px;
                margin-bottom: 35px;
            }

            .kpi-card {
                padding: 24px;
                border-radius: 16px;
                color: white;
                position: relative;
                box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1);
            }

            .kpi-card i {
                position: absolute;
                right: 20px;
                bottom: 20px;
                font-size: 2.5rem;
                opacity: 0.2;
            }

            .kpi-label { font-size: 0.9rem; font-weight: 600; text-transform: uppercase; }
            .kpi-value { font-size: 2.5rem; font-weight: 800; display: block; margin-top: 5px; }

            /* Cuerpo: Calendario y Citas */
            .content-grid {
                display: grid;
                grid-template-columns: 340px 1fr;
                gap: 25px;
            }

            .card-white {
                background: white;
                border-radius: 16px;
                border: 1px solid #e2e8f0;
                overflow: hidden;
            }

            .card-header-blue {
                background: var(--blue-primary);
                color: white;
                padding: 15px 20px;
                font-weight: 700;
                display: flex;
                align-items: center;
                gap: 10px;
            }

            /* Items de la lista de citas */
            .appointment-item {
                padding: 20px;
                border-bottom: 1px solid #f1f5f9;
                display: flex;
                justify-content: space-between;
                align-items: center;
                border-left: 6px solid transparent;
            }

            .status-pending { border-left-color: var(--yellow-stat); }
            .status-atended { border-left-color: var(--green-stat); }

            .time-box {
                background: #eff6ff;
                color: var(--blue-primary);
                padding: 8px 15px;
                border-radius: 10px;
                font-weight: 800;
                font-size: 1rem;
            }

            .badge {
                padding: 5px 12px;
                border-radius: 20px;
                font-size: 0.75rem;
                font-weight: 700;
            }
            .badge-yellow { background: #fef3c7; color: #92400e; }
            .badge-green { background: #d1fae5; color: #065f46; }

            /* Ajuste del calendario PrimeFaces */
            .ui-datepicker-inline { width: 100% !important; border: none !important; }
        </style>

        <h:form id="mainDashForm">
            <div class="dashboard-container">

                <div class="dash-header">
                    <div class="brand-section">
                        <h1>SMILEHUB</h1>
                        <small style="color: #64748b">Sistema de Agendamiento - Panel de Secretaría</small>
                    </div>
                    <div style="display: flex; gap: 12px;">
                        <p:commandButton value="Nueva Cita" icon="pi pi-plus" styleClass="ui-button-primary" />
                        <p:commandButton value="Nuevo Doctor" icon="pi pi-user-plus" styleClass="ui-button-outlined" />
                        <p:commandButton value="Ver Registros" icon="pi pi-file" styleClass="ui-button-outlined" />
                        <p:commandButton value="Cerrar Sesión" icon="pi pi-power-off"
                                         action="#{authenticationController.logout}"
                                         styleClass="ui-button-danger ui-button-flat" />
                    </div>
                </div>

                <div class="kpi-grid">
                    <div class="kpi-card" style="background: #3b82f6;">
                        <span class="kpi-label">Citas Hoy</span>
                        <span class="kpi-value">2</span>
                        <i class="pi pi-calendar-plus"></i>
                    </div>
                    <div class="kpi-card" style="background: #f59e0b;">
                        <span class="kpi-label">Pendientes</span>
                        <span class="kpi-value">1</span>
                        <i class="pi pi-clock"></i>
                    </div>
                    <div class="kpi-card" style="background: #10b981;">
                        <span class="kpi-label">Atendidas Hoy</span>
                        <span class="kpi-value">1</span>
                        <i class="pi pi-check-circle"></i>
                    </div>
                    <div class="kpi-card" style="background: #8b5cf6;">
                        <span class="kpi-label">Total Pacientes</span>
                        <span class="kpi-value">3</span>
                        <i class="pi pi-users"></i>
                    </div>
                </div>

                <div class="content-grid">
                    <div class="card-white" style="padding: 20px;">
                        <h4 style="margin: 0 0 20px 0; color: #1e293b;"><i class="pi pi-calendar mr-2"></i> Vista Mensual</h4>
                        <p:calendar mode="inline" />
                    </div>

                    <div class="card-white">
                        <div class="card-header-blue">
                            <i class="pi pi-list"></i> Citas para el 6 de febrero de 2026
                        </div>

                        <div class="appointment-item status-pending">
                            <div style="display: flex; align-items: center; gap: 20px;">
                                <div class="time-box">09:00</div>
                                <div>
                                    <div style="font-weight: 700; color: #1e293b;">Juan Carlos Martínez López</div>
                                    <small style="color: #64748b;">Dra. María Elena Pérez Ramírez</small>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 15px;">
                                <span class="badge badge-yellow">Pendiente</span>
                                <p:commandButton value="Ver Comprobante" icon="pi pi-file-pdf" styleClass="ui-button-flat ui-button-info" />
                            </div>
                        </div>

                        <div class="appointment-item status-atended">
                            <div style="display: flex; align-items: center; gap: 20px;">
                                <div class="time-box">10:30</div>
                                <div>
                                    <div style="font-weight: 700; color: #1e293b;">Ana Lucía González Vera</div>
                                    <small style="color: #64748b;">Dr. Carlos Alberto Rodríguez Sánchez</small>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 15px;">
                                <span class="badge badge-green">Atendida</span>
                                <p:commandButton value="Ver Comprobante" icon="pi pi-file-pdf" styleClass="ui-button-flat ui-button-info" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </h:form>
    </ui:define>
</ui:composition>